<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Halfway Through ClojureCup</title>
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Link to RSS feed -->
    
      <link rel="home" type="application/atom+xml" href="/feed.xml">
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51485241-1', 'nbeloglazov.com');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js" async="true"></script>
  </head>
  <body>
    <div class="site">
      <aside class="sidebar" id="sidebar">
        <div class="header">
          
            <h1 class="title"><a href="/"><img id="avatar" src="/images/avatar.jpg"></a></h1>
            <span class="tagline">
              Quil, Ð¡lojure and programming in general
            </span>
          
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/2014/10/01/introducing-hatnik.html">
                  <span class="post-date">01 Oct 2014</span>
                  Introducing Hatnik
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2014/09/27/halfway-through-clojurecup.html">
                  <span class="post-date">27 Sep 2014</span>
                  Halfway Through ClojureCup
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2014/09/23/gsoc-results.html">
                  <span class="post-date">23 Sep 2014</span>
                  Clojure Google Summer of Code Results
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/2014/09/09/equilibrium.html">
                  <span class="post-date">09 Sep 2014</span>
                  Equilibrium
                </a>
              </li>
            
          </ul>
       </div>
       <p class="all-posts-link">
         
         <a href="/all.html">All posts</a>
         
        </p>
        <div class="footer">
          <span id="footer-links">
            <a href="https://github.com/nbeloglazov" class="footer-link">GitHub</a>
            <span class="separator">&bull;</span>
            <a href="https://www.linkedin.com/in/nikitabeloglazov/" class="footer-link">LinkedIn</a>
            <span class="separator">&bull;</span>
            
            <a href="/feed.xml">
            
              <img class="rss" src="/images/rss.png"/>
            </a>
          </span>
        </div>
      </aside>
        <article class="content" id="home">
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=258381704207913&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="info-container">
      
      
        <a href="/ru/2014/09/27/halfway-through-clojurecup.html" class="lang-link">Ru</a>
        <p class="lang-link">En</p>
      
      
      <h1 id="title">Halfway Through ClojureCup</h1>
      <time datetime="2014-09-27" id="date" pubdate>27 Sep 2014</time>
    </div>
  </div>

  <div class="post">
    <h3>Hatnik</h3>

<p>As you might have guessed, this year I&#39;m participating in <a href="http://clojurecup.com">ClojureCup</a>. We (<a href="https://github.com/nbeloglazov">me</a> and <a href="https://github.com/norgat">Maksim</a>) are working on a project called Hatnik. It&#39;s a web app which aims to help you to track library releases. The idea is pretty simple: setup actions to be performed once some library is released. An action consists of 2 parts: library to watch and an instruction to perform. Example: send email to <code>me@nbeloglazov.com</code> when <code>org.clojure/clojurescript</code> releases. It is somewhat similar to <a href="https://ifttt.com/">IFTTT</a> (but more specialized) and pretty similar to <a href="https://www.artifact-listener.org/">Artifact Listener</a> (but obviously cooler!). We have plans to support following actions: email, github issue, github pull request, change wiki on github. Initially we&#39;re going to support only email and add others if we have enough time during the contest.
<br><br>
Organizers provided quite a few additional services like private github repo, a server for hosting app, CI servers, error-tracking utility, team chat and some other stuff. We&#39;ve been using only few of them: github repo, server for hosting app and Flowdock for communication: it has integration with github and trello so we can see everything that happens in repo or task list in realtime. Though other services looked intersting I felt we&#39;d spent too much time setting them up instead of working on the project.</p>

<h3>Architecture</h3>

<p>The app consists of 3 parts:</p>

<ul>
<li>Web client - that&#39;s what user sees and interacts with.</li>
<li>Web server - provides API for web client and stores data to DB.</li>
<li>Worker server - periodically checks versions of all registered libraries and performs actions.</li>
</ul>

<p>I work on servers while Maksim works on the web client. For the web client we decided to use ClojureScript + Om and Twitter Bootstrap for fancy styling. Server side libraries are pretty standard: ring, compojure, monger and few other libs for emails, github api, and other stuff. You can find more details about the project in <a href="https://docs.google.com/document/d/1-Ad0h22qkmLARB7T8TfokJYonOlPZzZ-cuDzz6tW7hU/edit?usp=sharing">design doc</a> which we prepared beforehand so we can concentrate on coding!</p>

<h3>What we have so far</h3>

<p>I would say we have quite enough:</p>

<h4>Web client</h4>

<p>Client can load and display projects together with actions. You can add new projects. What&#39;s left to do: actions adding/modifying, login (everything is ready, only need to add buttons), nice &quot;About&quot; page that describes how to use Hatnik.</p>

<h4>Web server</h4>

<p>Web server is mostly done. REST API is implemented, everything is stored in DB. DB is represented as a protocol that has 2 implementations: in-memory and mongo. It might be overkill but I found it&#39;s quite useful to be able to run everything in memory. I even had time to add tests for DB! I used <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en">Postman</a> for testing REST API. It is quite cool as it allows you to save requests and reuse them later. I probably should have added some tests for REST instead but due to the time limit I decided to go with Postman: it is easier to setup and use.</p>

<h4>Worker server</h4>

<p>Currently worker server can only submit emails on user request: when you create an action you have an option to test it, the test request is sent to the worker server to perform the action. What&#39;s left to do: add logic for checking versions of all registered libraries and perform actions for updated libraries, invoke this logic periodically.</p>

<h3>Conclusion</h3>

<p>I&#39;m having a lot of fun! I don&#39;t remember when I wrote so much code last time. Lately I&#39;ve been coding less at work so ClojureCup came just in time. Especially when you have an excuse to not write tons of tests and just code for the sake of coding. If you&#39;re interested in what we have so far - check our <a href="https://github.com/clojurecup2014/hatnik/">github repo</a>. And of course check out our app when the contest is over.</p>

  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">
        
          Published on
        
        27 Sep 2014
      </span>
    </p>
  </div>
  <div id="social-buttons">
    <g:plusone href="http://nbeloglazov.com/2014/09/27/halfway-through-clojurecup.html"></g:plusone>
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="http://nbeloglazov.com/2014/09/27/halfway-through-clojurecup.html">Tweet</a>
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <div class="fb-like" data-href="http://nbeloglazov.com/2014/09/27/halfway-through-clojurecup.html" data-layout="button_count"
         data-action="like" data-show-faces="true" data-share="false"></div>
  </div>
  <!-- AddThis Button END -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'nbeloglazovblog';
    var disqus_identifier = '/2014/09/27/halfway-through-clojurecup';
    var disqus_title = 'Halfway Through ClojureCup';
    var disqus_url = 'http://nbeloglazov.com/2014/09/27/halfway-through-clojurecup.html';

    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>


    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
