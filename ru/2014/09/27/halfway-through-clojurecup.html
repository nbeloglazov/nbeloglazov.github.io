<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Половина ClojureCup позади</title>
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Link to RSS feed -->
    
      <link rel="home" type="application/atom+xml" href="/ru/feed.xml">
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51485241-1', 'nbeloglazov.com');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js" async="true"></script>
  </head>
  <body>
    <div class="site">
      <aside class="sidebar" id="sidebar">
        <div class="header">
          
            <h1 class="title"><a href="/ru"><img id="avatar" src="/images/avatar.jpg"></a></h1>
            <span class="tagline">
              Блог о Quil, Clojure и программировании
            </span>
          
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/10/01/introducing-hatnik.html">
                  <span class="post-date">01 Oct 2014</span>
                  ClojureCup: Хатник
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/09/27/halfway-through-clojurecup.html">
                  <span class="post-date">27 Sep 2014</span>
                  Половина ClojureCup позади
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/09/09/equilibrium.html">
                  <span class="post-date">09 Sep 2014</span>
                  Равновесие
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/08/16/poor-mans-cljsfiddle.html">
                  <span class="post-date">16 Aug 2014</span>
                  Cljsfiddle для бедных
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/07/15/clojure-dojo-and-pubsub.html">
                  <span class="post-date">15 Jul 2014</span>
                  Clojure Dojo и PubSub
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/06/22/quil-age-of-middleware.html">
                  <span class="post-date">22 Jun 2014</span>
                  Quil Middleware
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/05/29/quil-intro.html">
                  <span class="post-date">29 May 2014</span>
                  Введение в Quil
                </a>
              </li>
            
          </ul>
       </div>
        <div class="footer">
          <span id="footer-links">
            <a href="https://github.com/nbeloglazov" class="footer-link">GitHub</a>
            <span class="separator">&bull;</span>
            <a href="https://www.linkedin.com/in/nikitabeloglazov/" class="footer-link">LinkedIn</a>
            <span class="separator">&bull;</span>
            <a href="/myfirstrss.xml" rel="home">
            
            <a href="/ru/feed.xml" rel="home">
            
              <img class="rss" src="/images/rss.png"/>
            </a>
          </span>
        </div>
      </aside>
        <article class="content" id="home">
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=258381704207913&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="info-container">
      
      
        <p class="lang-link">Ru</p>
        <a href="/2014/09/27/halfway-through-clojurecup.html" class="lang-link">En</a>
      
      
      <h1 id="title">Половина ClojureCup позади</h1>
      <time datetime="2014-09-27" id="date" pubdate>27 Sep 2014</time>
    </div>
  </div>

  <div class="post">
    <h3>Хатник</h3>

<p>Как можно догадаться, в этом году я участвую в <a href="http://clojurecup.com">ClojureCup</a>. Мы (<a href="https://github.com/nbeloglazov">я</a> и <a href="https://github.com/norgat">Максим</a>) работаем над проектом под названием Хатник. Это веб приложение для отслеживания релиза библиотек. Идея весьма проста: настроить действия, которые будут выполняться как только библиотека зарелизилась. Действие состоит из 2 частей: названия библиотеки и инструкции, что сделать, когда она зарелизится. Например: послать письмо на <code>me@nbeloglazov.com</code>, когда <code>org.clojure/clojurescript</code> зарелизит новую версию. Проект немного сходен с <a href="https://ifttt.com">IFTT</a> (наш более специализирован) и очень похож на <a href="https://www.artifact-listener.org/">Artifact Listener</a> (но наш конечно будет круче!). Мы собираемся реализовать следующия действия: емейл, создание баги на гитхабе, создание пул реквеста на гитхабе, изменения вики на гитхабе. Изначально будет только емейл, а остальное будем делать как будем успевать до конца контекста.
<br><br>
Организаторы предоставили достаточно много дополнительных сервисов: приватный репо на гитхабе, сервер для хостинга приложения, CI сервера, какая-то штука для отслеживания ошибок, командный чат и другие. Но мы используем только пару из них: репо на гитхабе, сервер для приложения и командный чат: в нём есть интеграция с гитхабом и трелло, так что достаточно удобно видеть активность в репозитории и таск листе. Хоть остальные сервисы и выглядят интересно - мы решили их не трогать, т.к. их настройка заняла бы больше времени, чем принесло бы пользы.</p>

<h3>Архитектура</h3>

<p>Приложение состоит из 3 частей:</p>

<ul>
<li>Веб клиент - то, что видит юзер и с чем он взаимодействует.</li>
<li>Веб сервер - предоставляет API для клиента и сохраняет всё в БД.</li>
<li>Воркер сервер - периодически проверяет версии всех зареганых библиотек и выполняет действия.</li>
</ul>

<p>Я работаю над серверами, а Максим над клиентом. Для клиента мы решили использовать ClojureScript + Om и Twitter Bootstrap для модненьких кнопочек и всего остального. Серверные библиотеки весьма стандартные: ring, compojure, monger и несколько остальных для работы гитхабом, емейлами и всего остального. Больше деталей можно найти в нашем <a href="https://docs.google.com/document/d/1-Ad0h22qkmLARB7T8TfokJYonOlPZzZ-cuDzz6tW7hU/edit?usp=sharing">дизайн доке</a>, который мы подготовили заранее, чтобы сконцетрироваться на кодинге!</p>

<h3>Что у нас есть на данный момент</h3>

<p>Я бы сказал, у нас есть достаточно много:</p>

<h4>Веб клиент</h4>

<p>Клиент может загружать и показывать проекты вместе с действиями. Можно добавлять новые проекты. Что осталось: добавления/модификацию действий, логин (всё уже готово, осталось добавить кнопки) и красивую &quot;About&quot; страницу, которая описывает как-зачем-и-почему.</p>

<h4>Веб сервер</h4>

<p>Веб сервер практически весь сделан. REST API реализовано, всё сохраняется в БД. БД представлена протоколом с 2 реализациями: в памяти и на монге. Может это и оверкил было делать 2 реализации, но весьма удобно запускать всё в памяти локально. Тогда не надо обоим членам команды мучаться с установкой монги и всем таким. Я даже написал тесты для БД! Так же я использовал <a href="https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en">Postman</a> (плагин для хрома) для тестирования REST API. Он достаточно крут, т.к. позволяет сохранять запросы и переиспользовать их потом. В идеале я должен был написать тесты вместо этого, но из-за ограниченного времения я выбрал Postman: он проще настраивается и используется.</p>

<h4>Воркер сервер</h4>

<p>На данный момент сервер может только посылать емейлы по запросу пользователя: когда на клиенте создаёшь действие, то можно его протестировать, тогда запрос на тест уходит на воркер сервер и тот его выполняет. Что осталось: добавить логику для проверки версий всех зарегистрированных библиотек, выполнение действий для изменившихся, и настроить периодический вызов этого всего счастья.</p>

<h3>Заключение</h3>

<p>Я получаю кучу удовольствия от соревнования! Я не помню, когда в последний раз писал так много кода. В последнее время я кожу/кодю на работе гораздо меньше, так что ClojureCup очень кстати. Особенно, когда есть отмазка, чтобы не писать кучу тестов, а кодить просто ради кодинга. Если интересно посмотреть на то, что у нас есть на данный момент - <a href="https://github.com/clojurecup2014/hatnik/">гитхаб репо</a>, там конечно всё без комментов, так что наверное непонятно. И конечно не забудьте проверить наше приложение после окончания контеста!</p>

  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">
        
          Опубликовано
        
        27 Sep 2014
      </span>
    </p>
  </div>
  <div id="social-buttons">
    <g:plusone href="http://nbeloglazov.com/ru/2014/09/27/halfway-through-clojurecup.html"></g:plusone>
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="http://nbeloglazov.com/ru/2014/09/27/halfway-through-clojurecup.html">Tweet</a>
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <div class="fb-like" data-href="http://nbeloglazov.com/ru/2014/09/27/halfway-through-clojurecup.html" data-layout="button_count"
         data-action="like" data-show-faces="true" data-share="false"></div>
  </div>
  <!-- AddThis Button END -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'nbeloglazovblog';
    var disqus_identifier = '/ru/2014/09/27/halfway-through-clojurecup';
    var disqus_title = 'Половина ClojureCup позади';
    var disqus_url = 'http://nbeloglazov.com/ru/2014/09/27/halfway-through-clojurecup.html';

    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>


    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
