<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>ClojureCup: Хатник</title>
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Link to RSS feed -->
    
      <link rel="home" type="application/atom+xml" href="/ru/feed.xml">
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51485241-1', 'nbeloglazov.com');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js" async="true"></script>
  </head>
  <body>
    <div class="site">
      <aside class="sidebar" id="sidebar">
        <div class="header">
          
            <h1 class="title"><a href="/ru"><img id="avatar" src="/images/avatar.jpg"></a></h1>
            <span class="tagline">
              Блог о Quil, Clojure и программировании
            </span>
          
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/ru/2015/06/15/live-reloading-in-quil-cljs.html">
                  <span class="post-date">15 Jun 2015</span>
                  Перезагрузка кода в Quil cljs
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/12/15/backup-mongodb-using-clojure.html">
                  <span class="post-date">15 Dec 2014</span>
                  Бэкапим монгу используя кложур
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/11/24/github-actions-in-hatnik.html">
                  <span class="post-date">24 Nov 2014</span>
                  Гитхаб действия в Хатнике
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/10/01/introducing-hatnik.html">
                  <span class="post-date">01 Oct 2014</span>
                  ClojureCup: Хатник
                </a>
              </li>
            
          </ul>
       </div>
       <p class="all-posts-link">
         
         <a href="/ru/all.html">Все посты</a>
         
        </p>
        <div class="footer">
          <span id="footer-links">
            <a href="https://github.com/nbeloglazov" class="footer-link">GitHub</a>
            <span class="separator">&bull;</span>
            <a href="https://www.linkedin.com/in/nikitabeloglazov/" class="footer-link">LinkedIn</a>
            <span class="separator">&bull;</span>
            <a href="https://twitter.com/BeloglazovN/" class="footer-link">Twitter</a>
            <span class="separator">&bull;</span>
            
            <a href="/ru/feed.xml" rel="home">
            
              <img class="rss" src="/images/rss.png"/>
            </a>
          </span>
        </div>
      </aside>
        <article class="content" id="home">
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=258381704207913&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="info-container">
      
      
        <p class="lang-link">Ru</p>
        <a href="/2014/10/01/introducing-hatnik.html" class="lang-link">En</a>
      
      
      <h1 id="title">ClojureCup: Хатник</h1>
      <time datetime="2014-10-01" id="date" pubdate>01 Oct 2014</time>
    </div>
  </div>

  <div class="post">
    <h3>Не пропусти релиз!</h3>

<p>Хатник (Hatnik) - веб сайт, который мы написали в течение ClojureCup, который проходил на этих выходных. ClojureCup - это соревнование, где нужно написать приложение на кложуре/кложурскрипте за 48 часов. Предназначение Хатника - информировать о релизах библиотек (на данный момент только по почте). Он поддерживат Clojure и Maven библиотеки, которые хостятся, соответственно, на Clojars или Maven Central. Использовать его просто: залогиниться и создать действие, которое состоит из названия библиотеки и текста нотификации. Всё. Теперь во время каждого релиза библиотеки вы будете получать письмо. Посмотреть вживую можно тут: <a href="http://hatnik.clojurecup.com">hatnik.clojurecup.com</a>. Если не любите логиниться в незнакомые сайты, то вот небольшая скриншот-демонстрация:</p>

<p><br>
Начальная страница после логина</p>

<p><img src="/images/hatnik/hatnik_0.png" alt="Initial page"></p>

<p><br>
<br>
Создание нового действия</p>

<p><img src="/images/hatnik/hatnik_1.png" alt="Create new action"></p>

<p><br>
<br>
Действие создано</p>

<p><img src="/images/hatnik/hatnik_2.png" alt="The action created"></p>

<p><br>
<br>
Библиотеки, используемые в Хатнике</p>

<p><img src="/images/hatnik/hatnik_3.png" alt="All libraries"></p>

<p>Также можно группировать действия по проектам. Проект - это просто именованная группа действий. Каждый пользователь по умолчанию имеет Default проект (смотрите скриншот).</p>

<h3>Дальнейшие планы</h3>

<p>Мы накодили проект за 2 дня, так что очевидно, что ещё куча просторов для улучшений.</p>

<h4>Больше действий</h4>

<p>На данный момент Хатник поддерживает только емейл уведомления. Мы планируем добавить больше. Вот начальный план:</p>

<ul>
<li>Noop - действие, которое ничего не делает. Может быть полезно, если нужно создать просто доску с последними версиями библиотек.</li>
<li>GitHub Issue - создать гитхаб таску/багу/задачу/не-знаю-как-правильно на гитхабе.</li>
<li>GitHub Wiki Page - поредактировать страницу используя простой find-and-replace механизм.</li>
<li>GitHub Pull Request - изменить файлы в проекте, используя find-and-replace механизм</li>
</ul>

<h4>Чистка</h4>

<p>Мы писали Хатника в спешке, так что появился технический долг:</p>

<ul>
<li>Улучшить веб-клиент. Мы использовали Ом для веб клиента, но знали его не очень хорошо и в некоторых местах код получился не сильно каноническим для Ома. Например мы потратили пару часов в конце контеста, воюя с багом, в котором текстовое поле для ввода названия библиотеки было неизменяемым. Похоже, что именно этот баг описан в <a href="https://github.com/swannodette/om/wiki/Basic-Tutorial#dealing-with-text-input-fields">туториале</a>, но даже используя туториал мы так и не смогли его пофиксить. В результате использовали жуткий костыль, в котором устанавливали значение в поле используя <code>setTimeout</code> (а именно установка значения в поле делала его неизменяемым).</li>
<li>Добавить больше валидации. На данный момент REST API достаточно свободный и производит минимум валидации. Это нужно исправить. Мы думаем попробовать  Prismatic <a href="https://github.com/Prismatic/schema">schema</a> для этого.</li>
<li>Добавить core.typed. На работе я достаточно плотно работаю с Google Closure Compiler. Одной из его фич является то, что он вводит типизацию в джаваскрипт. Это сильно помогает в написании корректного кода. И именно для этого хочется попробовать core.typed, посмотреть, будет ли он полезен.</li>
<li>Добавить тестов. На данный момент у нас есть немного тестов для базы данных. Надо бы добавить интеграционных тестов, которые будут тестать API, отправку емейлов, создания всякой всячины на гитхабе. Ещё было хорошо добавить тесты для клиента, возможно используя вебдрайвер.</li>
</ul>

<h4>Другие планы</h4>

<p>На данный момент Хатник поддерживает только мавеновские библиотеки. Но по идее ничего не мешает поддерживать и библиотеки для других языков/платформ. например для руби, джаваскрипта, питона. Насколько я понимаю, все используют HTTP для коммуникации с репозиториями, так что должно быть достаточно просто написать это на кложуре.</p>

<p>На данный момент все действия надо создавать один за одним. Было бы удобно иметь возможность указать ссылку на <code>project.clj</code> и из него будут извлечены все зависимости. Опять же, ничего не останавливает от поддержки и других видов билд-файлов, как например <code>pom.xml</code>, <code>build.sbt</code>, <code>Gemfile</code>. Конечно некоторые из них используют DSL&#39;и и будет не очень просто их распарсить. Но таска интересная.</p>

<h3>Заключение</h3>

<p>Несколько слов о названии проекта. Хатник - это домовой, но в переводе на белорусский. В моём представлении это такой добрый дедушка, который помогает по дому и выполняет мелкие дела. Так я и представляю себе этот проект - ненавязчиво помочь с какими-то рутинными задачами. Конечно, если почитать описание домового на вики, то там всё сложнее, но я буду придерживаться своей версии. Надеюсь я заинтересовал проектом. Если понравился Хатник, то за нас можно <a href="https://clojurecup.com/#/apps/hatnik">проголосвать</a>. Также стоит посмотреть на <a href="https://clojurecup.com/#/apps">другие проекты</a>, они достаточно интересные. И им также нужны голоса ;)</p>

<p>Кот Хатника можно посмотреть на <a href="https://github.com/nbeloglazov/hatnik">гитхабе</a>.</p>

  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">
        
          Опубликовано
        
        01 Oct 2014
      </span>
    </p>
  </div>
  <div id="social-buttons">
    <g:plusone href="http://nbeloglazov.com/ru/2014/10/01/introducing-hatnik.html"></g:plusone>
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="http://nbeloglazov.com/ru/2014/10/01/introducing-hatnik.html">Tweet</a>
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <div class="fb-like" data-href="http://nbeloglazov.com/ru/2014/10/01/introducing-hatnik.html" data-layout="button_count"
         data-action="like" data-show-faces="true" data-share="false"></div>
  </div>
  <!-- AddThis Button END -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'nbeloglazovblog';
    var disqus_identifier = '/ru/2014/10/01/introducing-hatnik';
    var disqus_title = 'ClojureCup: Хатник';
    var disqus_url = 'http://nbeloglazov.com/ru/2014/10/01/introducing-hatnik.html';

    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>


    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
