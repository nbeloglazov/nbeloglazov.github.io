<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Гитхаб действия в Хатнике</title>
    <meta name="viewport" content="width=device-width">

    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Responsive CSS -->
    <link rel="stylesheet" href="/css/responsive.css">

    <!-- Google Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700' rel='stylesheet' type='text/css'>

    <!-- Link to RSS feed -->
    
      <link rel="home" type="application/atom+xml" href="/ru/feed.xml">
    

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-51485241-1', 'nbeloglazov.com');
      ga('send', 'pageview');
    </script>
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js" async="true"></script>
  </head>
  <body>
    <div class="site">
      <aside class="sidebar" id="sidebar">
        <div class="header">
          
            <h1 class="title"><a href="/ru"><img id="avatar" src="/images/avatar.jpg"></a></h1>
            <span class="tagline">
              Блог о Quil, Clojure и программировании
            </span>
          
        </div>
        <div class="posts">
          <ul class="posts-list">
            
              <li class="post-link">
                <a class="post-title" href="/ru/2015/06/15/live-reloading-in-quil-cljs.html">
                  <span class="post-date">15 Jun 2015</span>
                  Перезагрузка кода в Quil cljs
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/12/15/backup-mongodb-using-clojure.html">
                  <span class="post-date">15 Dec 2014</span>
                  Бэкапим монгу используя кложур
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/11/24/github-actions-in-hatnik.html">
                  <span class="post-date">24 Nov 2014</span>
                  Гитхаб действия в Хатнике
                </a>
              </li>
            
              <li class="post-link">
                <a class="post-title" href="/ru/2014/10/01/introducing-hatnik.html">
                  <span class="post-date">01 Oct 2014</span>
                  ClojureCup: Хатник
                </a>
              </li>
            
          </ul>
       </div>
       <p class="all-posts-link">
         
         <a href="/ru/all.html">Все посты</a>
         
        </p>
        <div class="footer">
          <span id="footer-links">
            <a href="https://github.com/nbeloglazov" class="footer-link">GitHub</a>
            <span class="separator">&bull;</span>
            <a href="https://www.linkedin.com/in/nikitabeloglazov/" class="footer-link">LinkedIn</a>
            <span class="separator">&bull;</span>
            <a href="https://twitter.com/BeloglazovN/" class="footer-link">Twitter</a>
            <span class="separator">&bull;</span>
            
            <a href="/ru/feed.xml" rel="home">
            
              <img class="rss" src="/images/rss.png"/>
            </a>
          </span>
        </div>
      </aside>
        <article class="content" id="home">
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&appId=258381704207913&version=v2.0";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
  </script>
  <div id="sidebar-button">
    <img src="/images/sidebar-button.png">
  </div>
  <div id="post-info">
    <div id="info-container">
      
      
        <p class="lang-link">Ru</p>
        <a href="/2014/11/24/github-actions-in-hatnik.html" class="lang-link">En</a>
      
      
      <h1 id="title">Гитхаб действия в Хатнике</h1>
      <time datetime="2014-11-24" id="date" pubdate>24 Nov 2014</time>
    </div>
  </div>

  <div class="post">
    <p><a href="http://hatnik.com">Hatnik</a> - это веб проект, позволяющий отслеживать релизы библиотек: хочешь знать, когда зарелизилась новая версия кложурскрипта - настраиваешь действие в хатнике, и при следующем релизе действие будет автоматически выполнено. Изначально была поддержка только посылки емейла. Рад сообщить, что теперь также поддерживается создание гитхаб issue и pull request&#39;а.</p>

<h3>Issue</h3>

<p>Тут достаточно просто: создаём issue в выбранном репозитории каждый раз, когда релизится библиотека. Можно настраивать репозиторий, название и тело issue. Название и тело поддерживают несколько шаблонных переменных, например &quot;Релиз {{library}} {{version}}&quot; в финале будет выглядеть как &quot;Релиз org.clojure/clojurescript 0.0-2371&quot;.</p>

<p>Данный тип действия может быть полезен, например, самим разработчикам библиотек. Обычно во время релиза нужно сделать кучу небольших задач, например обновить вики, туториалы, может провести какое пост-релизное тестирование. И что-нибудь из этого всего легко забыть. Issue могут помочь с этим: для каждой задачи настроить по действию, чтобы при релизе посоздавались issue и потом уже их выполнять. Так же кто-нибудь другой может подхватить и сделать её.</p>

<h3>Pull request</h3>

<p>Pull request действие может изменять файлы в публичном репозитории и создавать pull request с этими изменениями. Каждая операция на изменение - это простой find-and-replace. Операция состоит из 3 полей: пути к файлу, который нужно изменить, регэкспа того, что нужно заменить и собственно строки замены. Поля регэкспа и замены поддерживают шаблонные переменные, упомянутые ранее.</p>

<p>Pull request может использоваться например для того, чтобы поддерживать зависимости в актуальном состоянии: нужно создать действие, которое будет обновлять версию зависимости X в <code>project.clj</code> каждый раз, когда X релизится. Особенно удобно, когда параллельно с этим настроен CI (например <a href="https://travis-ci.org/">Travis</a>, который тестирует все входящие pull request&#39;ы: можно просто посмотреть, проходят ли тесты и если да - то смержить. Таким образом нужен всего один клик для обновления зависимости! Ещё один вариант использования полезен для разработчиков библиотек. Обычно в README библиотеки указывается последняя версия библиотеки и пользователь может просто скопировать её в свой <code>project.clj</code> и сразу начать использовать. Иногда эта версия устаревает, т.к. разработчики просто забывают её обновлять. Тут и может помочь Хатник: нужно настроить действие, которое будет обновлять README. Например я настроил пару действий для Quil, которые обновляют README, примеры использования и lein шаблоны. Вот <a href="https://github.com/quil/quil-templates/pull/4">пример</a> подобного pull request&#39;а. Последнее замечание: если в результате выполнения действия никакие файлы не были изменены (например целевой файл был перемещён или версия в README уже изменена на последнюю), то pull request создан не будет, вместо него Хатник пошлёт емейл, в котором будут описаны причины того, почему ничего не получилось.</p>

<h3>TODO</h3>

<ul>
<li>Импорт билд файлов. На текущий момент Хатник не предоставляет возможности импортировать билд файлы, например <code>project.clj</code>. Если проект использует много зависимостей, то создание для каждого из них отдельного действия - занятие достаточно занудное. Поэтому Хатник должен поддерживать импорт билд файлов.</li>
<li>Возможность потыкать Хатника без полного логина. Хатник не должен требовать пользователя залогиниться через гитхаб для того, чтобы посмотреть что Хатник может. Должна быть возможность залогиниться как гость, возможно с ограниченым набором действий.</li>
<li>Поддержка других языков. На данный момент только мавен-совместимые библиотеки поддерживаются (Java, Clojure, Scala, Groovy). Нужно добавить поддержку других языков.</li>
</ul>

<h3>Участие</h3>

<p>Хатник - опен-сорсный проект. Можно взглянуть на <a href="https://github.com/nbeloglazov/hatnik">репозиторий</a>. Баги и pull request&#39;ы приветствуются!</p>

  </div>
  <div class="colophon">
    <p>
      <span id="pub-date">
        
          Опубликовано
        
        24 Nov 2014
      </span>
    </p>
  </div>
  <div id="social-buttons">
    <g:plusone href="http://nbeloglazov.com/ru/2014/11/24/github-actions-in-hatnik.html"></g:plusone>
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="http://nbeloglazov.com/ru/2014/11/24/github-actions-in-hatnik.html">Tweet</a>
    <script>
      !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
    </script>
    <div class="fb-like" data-href="http://nbeloglazov.com/ru/2014/11/24/github-actions-in-hatnik.html" data-layout="button_count"
         data-action="like" data-show-faces="true" data-share="false"></div>
  </div>
  <!-- AddThis Button END -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    var disqus_shortname = 'nbeloglazovblog';
    var disqus_identifier = '/ru/2014/11/24/github-actions-in-hatnik';
    var disqus_title = 'Гитхаб действия в Хатнике';
    var disqus_url = 'http://nbeloglazov.com/ru/2014/11/24/github-actions-in-hatnik.html';

    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>


    </div>
    <script src="/scripts/responsive.js" type="text/javascript"></script>
  </body>
</html>
